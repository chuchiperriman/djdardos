{% extends "dardos/base.html" %}

{% load dardos_general %}

{% block title %}Equipo{% endblock %}

{% block content %}

<link type="text/css" href="/site_media/css/ui/jquery.ui.all.css" rel="stylesheet" />
<script type="text/javascript" src="/site_media/js/jquery-1.4.2.js"></script>
<script type="text/javascript" src="/site_media/js/ui/jquery.ui.core.js"></script>
<script type="text/javascript" src="/site_media/js/ui/jquery.ui.widget.js"></script>
<script type="text/javascript" src="/site_media/js/ui/jquery.ui.tabs.js"></script>
<script type="text/javascript">
	$(function() {
		$("#tabs").tabs();
	});
</script>

<h1>{{ equipo.nombre }}</h1>
<div>
    <div id="logo-equipo">
        {% if equipo.path_foto%}
            <img src="/site_media/fotos/equipos/{{equipo.path_foto}}" />
        {% endif %}
    </div>
    
        <b>Nombre:</b> {{equipo.nombre}}<br/>
        <b>Campo: </b> {{equipo.campo}}<br/>
        <b>Dirección: </b> {{equipo.direccion}}<br/>
        <br/>
    <div style="clear:both"></div>
</div>

<div id="tabs">
	<ul>
		<li><a href="#tabs-1">Jugadores</a></li>
		<li><a href="#tabs-2">Clasificación</a></li>
		<li><a href="#tabs-3">Jornadas</a></li>
		<li><a href="#tabs-4">Estadísticas</a></li>
		<li><a href="#tabs-5">Gráficas</a></li>
		<li><a href="#tabs-6">Contacto</a></li>
	</ul>
	<div id="tabs-1">
		{% show_estadisticas_jugadores jugadores %}
	</div>
	<div id="tabs-2">
	    {% show_clasificacion liga_actual equipo%}
	</div>
	<div id="tabs-3">
		<h2>Liga {{liga_actual.nombre}} </h2>
		<table>
			<tr>
				<th>Nº Jornada</th>
				<th>Fecha</th>
				<th>Local</th>
				<th>Visitante</th>
				<th>Ganador</th>
				<th>Puntos local</th>
				<th>Puntos visitante</th>
				<th>Jugado</th>
				<th>&nbsp;</th>
			</tr>
		{% for j in jornadas %}
			{% if j.partido %}
			<tr>
				<td><b>Jornada {{j.jornada.numero}}</b></td>
				<td>{{j.partido.fecha|date:"d-m-Y"}}</td>
				<td>{{j.partido.equipo_local.nombre}}</td>
				<td>{{j.partido.equipo_visitante.nombre}}</td>
				<td><b>{{j.partido.ganador.nombre}}</b></td>
				<td><b>{{j.partido.puntos_local}}</b></td>
				<td><b>{{j.partido.puntos_visitante}}</b></td>
				<td>
					{% if j.partido.jugado %}
						<img src="/site_media/images/yes.png" />
					{% else %}
						<img src="/site_media/images/no.png" />
					{%endif%}
				</td>
				<td>
				    {% if j.partido.jugado %}
                		<a href="/partidos/{{j.partido.id}}" class="view"></a>
            		{% endif %}
				</td>
			</tr>
			{% endif %}
		{% endfor %}
		</table>
	</div>
	<div id="tabs-4">
		<table>
			<tr>
				<th>Tipo partida</th>
				<th>Jugados</th>
				<th>Ganados</th>
				<th>Perdidos</th>
				<th>Empatados</th>
			</tr>
			<tr>
				<td>Local</td>
				<td>{{estadisticas.partidos_jugados_local}}</td>
				<td>{{estadisticas.partidos_ganados_local}}</td>
				<td>{{estadisticas.partidos_perdidos_local}}</td>
				<td>{{estadisticas.partidos_empatados_local}}</td>
			</tr>
			<tr>
				<td>Visitante</td>
				<td>{{estadisticas.partidos_jugados_visitante}}</td>
				<td>{{estadisticas.partidos_ganados_visitante}}</td>
				<td>{{estadisticas.partidos_perdidos_visitante}}</td>
				<td>{{estadisticas.partidos_empatados_visitante}}</td>
			</tr>
			<tr>
				<td>General</td>
				<td>{{estadisticas.partidos_jugados}}</td>
				<td>{{estadisticas.partidos_ganados}}</td>
				<td>{{estadisticas.partidos_perdidos}}</td>
				<td>{{estadisticas.partidos_empatados}}</td>
			</tr>
		</table>
		<table>
			<tr>
				<td>Más victorias</td>
				<td>{{estadisticas.datos_mas_ganadas}}</td>
			</tr>
			<tr>
				<td>Más derrotas</td>
				<td>{{estadisticas.datos_mas_perdidas}}</td>
			</tr>
			<tr>
				<td>Más victorias individuales</td>
				<td>{{estadisticas.datos_mas_ganadas_ind}}</td>
			</tr>
			<tr>
				<td>Más victorias parejas</td>
				<td>{{estadisticas.datos_mas_ganadas_par}}</td>
			</tr>
			<tr>
				<td>Más derrotas individuales</td>
				<td>{{estadisticas.datos_mas_perdidas_ind}}</td>
			</tr>
			<tr>
				<td>Más derrotas parejas</td>
				<td>{{estadisticas.datos_mas_perdidas_par}}</td>
			</tr>
			<tr>
				<td>Mejor diferencia individuales</td>
				<td>{{estadisticas.datos_mejor_diferencia_ind}}</td>
			</tr>
			<tr>
				<td>Mejor diferencia parejas</td>
				<td>{{estadisticas.datos_mejor_diferencia_par}}</td>
			</tr>
			<tr>
				<td>Mejor diferencia general</td>
				<td>{{estadisticas.datos_mejor_diferencia}}</td>
			</tr>
			<tr>
				<td>Peor diferencia individuales</td>
				<td>{{estadisticas.datos_peor_diferencia_ind}}</td>
			</tr>
			<tr>
				<td>Peor diferencia parejas</td>
				<td>{{estadisticas.datos_peor_diferencia_par}}</td>
			</tr>
			<tr>
				<td>Peor diferencia general</td>
				<td>{{estadisticas.datos_peor_diferencia}}</td>
			</tr>
			<tr>
				<td>Mejor porcentaje individuales</td>
				<td>{{estadisticas.datos_mejor_porcentaje_ind}}</td>
			</tr>
			<tr>
				<td>Mejor porcentaje parejas</td>
				<td>{{estadisticas.datos_mejor_porcentaje_par}}</td>
			</tr>
			<tr>
				<td>Mejor porcentaje general</td>
				<td>{{estadisticas.datos_mejor_porcentaje}}</td>
			</tr>
			<tr>
				<td>Mayor porcentaje perdidas individuales</td>
				<td>{{estadisticas.datos_mayor_porcentaje_perdidas_ind}}</td>
			</tr>
			<tr>
				<td>Mayor porcentaje perdidas parejas</td>
				<td>{{estadisticas.datos_mayor_porcentaje_perdidas_par}}</td>
			</tr>
			<tr>
				<td>Mayor porcentaje perdidas general</td>
				<td>{{estadisticas.datos_mayor_porcentaje_perdidas}}</td>
			</tr>
		</table>
	</div>
	<div id="tabs-5">
	    <!--[if IE]><script language="javascript" type="text/javascript" src="/site_media/js/excanvas.js"></script><![endif]-->
        <script language="javascript" type="text/javascript" src="/site_media/js/jquery.jqplot.min.js"></script>
        <link rel="stylesheet" type="text/css" href="/site_media/css/jquery.jqplot.css" />
        <div id="chartdiv" style="height:400px;width:500px; "></div>
        <script language="javascript">
            line1=[
                {% for j in jornadas %}
                    {% if j.partido.jugado %}
                        {% ifequal j.partido.equipo_local.id equipo.id %}
                            [{{j.jornada.numero}},{{j.partido.puntos_local}}],
                        {% else %}
                            [{{j.jornada.numero}},{{j.partido.puntos_visitante}}],
                        {% endifequal %}
                    {% endif %}
                {% endfor%}
                ];
            line2=[
                {% for j in jornadas %}
                    {% if j.partido.jugado %}
                        {% ifnotequal j.partido.equipo_local.id equipo.id %}
                            [{{j.jornada.numero}},{{j.partido.puntos_local}}],
                        {% else %}
                            [{{j.jornada.numero}},{{j.partido.puntos_visitante}}],
                        {% endifnotequal %}
                    {% endif %}
                {% endfor%}
            ];
            xticks = [0,1,2,3,4,5,6,7,8,9,10];
            yticks = [0, 2, 4, 6, 8, 10, 12, 14, 16];
            plot4 = $.jqplot('chartdiv', [line1, line2], {
                legend:{show:true}, 
                title:'Evolución de partidas ganadas/perdidas',
                grid: {background:'#f3f3f3', gridLineColor:'#accf9b'},
                series:[
                    {label:'Ganadas'}, 
                    {label:'Perdidas'}
                ],
                axes:{
                    xaxis:{ticks:xticks}, 
                    yaxis:{ticks:yticks, tickOptions:{formatString:'%d'}}
                }
            });
        </script>
	</div>
	<div id="tabs-6">
	    <div id="mapa" style="float:right">
	        {% if equipo.google_maps %}
	            {{equipo.google_maps|safe}}
	        {% endif %}
	    </div>
	    <b>Campo: </b>{{equipo.campo}}<br/>
	    <b>Dirección: </b>{{equipo.direccion}}<br/>
	    <b>E-Mail: </b>{{equipo.email}}<br/>
	    <b>Teléfono: </b>{{equipo.telefono}}<br/>
	    <div style="clear: both"></div>
	</div>
</div>

{% endblock %}
